{"changed":true,"filter":false,"title":"home_controller.rb","tooltip":"/app/controllers/home_controller.rb","value":"class HomeController < ApplicationController\n before_action:authenticate_user!\n before_action:check_ownership, only:[:edit, :update, :destroy]\n require 'will_paginate/array'\n  def index\n    @posts=Post.all.reverse.paginate(page: params[:page], per_page: 3)\n    \n  end\n  \n  def new\n    \n  end\n  \n  def posts\n      @posts = Post.find_by(id: params[:id])\n        \n    \n  end\n  \n  def all_post\n    @posts=Post.all.reverse\n  end\n  \n  def create\n    post = Post.create(title:params[:title], content:params[:content], user_id:current_user.id, image:params[:image])\n    post.save\n    \n    redirect_to '/home/index'\n    \n  end\n  \n  def edit\n    @post = Post.find_by(id:params[:id])\n    \n    \n  end\n  \n  def update\n    post = Post.find_by(id:params[:id])\n    post.title=params[:title]\n    post.content=params[:content]\n    if post.save\n    \n    redirect_to '/home/posts'\n    \n    else redirect_to :back\n    \n   end\n  end\n  \n  def destroy\n    post = Post.find_by(id:params[:id])\n    post.destroy\n    \n    redirect_to :back\n    \n\n  end\n  \n  def comment_create\n    \n  comment = Comment.new\n  comment.user_id = current_user.id\n  comment.post_id = params[:id]\n  comment.content = params[:content]\n  comment.save\n\n  redirect_to :back\n  end\n  \n    \n  def search\n    @search = Post.search(params[:search])\n    if !@search.present?\n      flash[:alert]=\"no result\"\n    end\n  end\n  \n  \n  def profile\n    @posts=Post.find_by(id:params[:id])\n    \n  end\n  \n  def profile_posts\n    @profile_user = User.find_by(id:params[:id])\n  end\n  \n  private\n  \n  def check_ownership\n    post = Post.find_by(id:params[:id])\n    redirect_to '/home/index' if current_user.id != post.user_id\n    \n  end\n\n  \nend\n","undoManager":{"mark":-2,"position":5,"stack":[[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["0"],"id":2}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":[" "],"id":3}],[{"start":{"row":1,"column":2},"end":{"row":1,"column":3},"action":"insert","lines":[" "],"id":4}],[{"start":{"row":1,"column":3},"end":{"row":1,"column":4},"action":"insert","lines":[" "],"id":5}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"remove","lines":[" "],"id":6},{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":["0"]}],[{"start":{"row":1,"column":2},"end":{"row":1,"column":4},"action":"remove","lines":["  "],"id":7}]]},"ace":{"folds":[],"scrolltop":840,"scrollleft":0,"selection":{"start":{"row":10,"column":4},"end":{"row":10,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1556972056000}